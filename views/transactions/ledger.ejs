<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ledger</title>
    <link rel='stylesheet' href='/stylesheets/transactions/ledger.css'>
</head>
<body>
    <%- include('../_partial/_header'); -%>
    <div class="buffer">
        <div class="whitespace">

        </div>
        <%   let formatter = new Intl.NumberFormat('en-US',{minimumFractionDigits:2}); %>
        <%if (Name == 'RetainedEarnings') { %>
        <div class = "container">
            <div class="heading">
                <h1><%=Name %></h1>
                <h2>Initial Balance: <%=initialBalance %></h2>
                <h2>Normal Side: <%=Normal %></h2>
            </div>
            <div class="search">
                <label class="searchBar" for='search'>Search:</label><input id='search' type='text'>
                <select id='select'>
                    <option value=1>Date Created</option>
                    <option value=2>Date Approved</option>
                    <option value=3>Created By</option>
                    <option value=4>Approved By</option> 
                    <option value=5>Description</option>
                    <option value=6>Debit</option>
                    <option value=7>Credit</option>
                    
                    <input class='dateRange' type='date'>
                    <input class='dateRange' type='date'>
                </select>
            </div>
            <div class="tableFixHead">
                <table id='table'>
                    <thead>
                        <tr>
                            <th>Date Created</th>
                            <th>Date Approved</th>
                            <th>Made By</th>
                            <th>Approved By</th>
                            <th>Description</th>
                            <th>Debits</th>
                            <th>Credits</th>
                            <th>PR</th>
                        </tr>
                    </thead>
                    <%data.TextRow.forEach(element=>{%>
                        <tbody>
                            <tr>
                                <td><%=element.DATECREATED%></td>
                                <td><%=element.DATESUBMITTED%></td>
                                <td><%=element.MADEBY%></td>
                                <td><%=element.SUBMITTEDBY%></td>
                                <td><%=element.DESCRIPTION%></td>
                                <td><%=formatter.format(element.DEBIT)%></td>
                                <td><%=formatter.format(element.CREDIT)%></td>
                                <td><a href=<%= `/./${userType}/viewTransaction/${element.ID}`%>> <%=element.ID%> </a></td>
                            </tr>
                        </tbody>
                    <% })%>
                </table>
            </div>
        </div>
        <script src='/ejsscripts/transactions/ledgerScript.js'></script>

        <% } else{ %>

        <div class = "container">
            <div class="heading">
                <h1><%=Name %></h1>
                <h2>Initial Balance: <%=initialBalance %></h2>
                <h2>Normal Side: <%=Normal %></h2>
            </div>
            <div class="search">
                <label class="searchBar" for='search'>Search:</label><input id='search' type='text'>
                <select id='select'>
                    <option value=1>Date Created</option>
                    <option value=2>Date Approved</option>
                    <option value=3>Created By</option>
                    <option value=4>Approved By</option> 
                    <option value=5>Description</option>
                    <option value=6>Debit</option>
                    <option value=7>Credit</option>
                    <option value=8>Balance After</option>
                    
                    <input class='dateRange' type='date'>
                    <input class='dateRange' type='date'>
                </select>
            </div>
            <div class="tableFixHead">
                <table id='table'>
                    <thead>
                        <tr>
                            <th>Date Created</th>
                            <th>Date Approved</th>
                            <th>Made By</th>
                            <th>Approved By</th>
                            <th>Description</th>
                            <th>Debits</th>
                            <th>Credits</th>
                            <th>Balance After</th>
                            <th>PR</th>
                        </tr>
                    </thead>
                    <%data.TextRow.forEach(element=>{%>
                        <tbody>
                            <tr>
                                <td><%=element.DATECREATED%></td>
                                <td><%=element.DATESUBMITTED%></td>
                                <td><%=element.MADEBY%></td>
                                <td><%=element.SUBMITTEDBY%></td>
                                <td><%=element.DESCRIPTION%></td>
                                <td><%=formatter.format(element.DEBIT)%></td>
                                <td><%=formatter.format(element.CREDIT)%></td>
                                <td><%=formatter.format(element.BALANCE)%></td>
                                <td><a href=<%= `/./${userType}/viewTransaction/${element.ID}`%>> <%=element.ID%> </a></td>
                            </tr>
                        </tbody>
                    <% })%>
                </table>
            </div>
        </div>
        <script src='/ejsscripts/transactions/ledgerScript.js'></script>
        <% } %>
        <div class="whitespace">

        </div>
    </div>
</body>